<div class="container">
  <ol class="breadcrumb">
    <li><%= link_to 'Home', root_path %></li>
    <li><%= link_to 'Analytic instances', analytic_instances_path %></li>
    <li class="active">Analytic instance</li>
  </ol>
</div>

<%= render 'info' %>

<div class="container">
  <h2>Input streams
    <a href="<%= new_analytic_instance_analytic_instance_stream_path(@analytic_instance)%>" class="btn btn-success"> <span class="glyphicon glyphicon-plus"></span> Add Input Stream </a>
  </h2>

  <br/>

  <div class="media">
    <%if @analytic_instance.analytic_instance_streams.empty?%>
      <div class="alert alert-warning">
        Currently no input streams are registered with the analytic instance.
      </div>
    <%else%>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>Analytic instance input streams</h4>
        </div>
        <div class="media">
          <table class="table table-hover">
            <thead>
            <tr>
              <th>#</th>
              <th>Analytic input stream</th>
              <th>Stream</th>
              <th colspan="3"></th>
            </tr>
            </thead>

            <tbody>
            <% i = 1 %>
            <% @analytic_instance.analytic_instance_streams.each do |input_stream| %>
              <tr>
                <td><%= i %></td>
                <td><%= input_stream.analytic_input_stream.name %></td>
                <td><%= input_stream.stream.name %></td>

                <td><%= link_to 'Show', analytic_instance_analytic_instance_stream_path(@analytic_instance,input_stream), class: "btn btn-xs btn-default"%></td>
                <td><%= link_to 'Edit', edit_analytic_instance_analytic_instance_stream_path(@analytic_instance,input_stream), class: "btn btn-xs btn-warning" %>
                <td><%= link_to 'Destroy', analytic_instance_analytic_instance_stream_path(@analytic_instance,input_stream), method: :delete, class: "btn btn-xs btn-danger", data: { confirm: 'Are you sure?' } %></td>
              </tr>
                <% i = i + 1 %>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <%end%>
  </div>
</div>

<div class="container">
  <p>
  <h2>Results applications
    <a href="<%= new_analytic_instance_analytic_instance_results_app_path(@analytic_instance)%>" class="btn btn-success"> <span class="glyphicon glyphicon-plus"></span> Register Results Application </a>
  </h2>
  </p>

  <div class="media">
    <%if @analytic_instance.analytic_instance_results_apps.empty?%>
      <div class="alert alert-warning">
        Currently no applications are registered to view results of this analytic instance.
      </div>
    <%else%>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>Analytic instance results applications</h4>
        </div>
        <div class="media">
          <table class="table table-hover">
            <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Connector Type</th>
              <th colspan="3"></th>
            </tr>
            </thead>

            <tbody>
            <% i = 1 %>
            <% @analytic_instance.analytic_instance_results_apps.each do |results_app_reg| %>
                <tr>
                  <td><%= i %></td>
                  <td><%= results_app_reg.results_app.name %></td>
                  <td><%= results_app_reg.results_app.results_app_connector.name %></td>

                  <td><%= link_to 'Show', analytic_instance_analytic_instance_results_app_path(@analytic_instance,results_app_reg), class: "btn btn-xs btn-default"%></td>
                  <td><%= link_to 'Edit', edit_analytic_instance_analytic_instance_results_app_path(@analytic_instance,results_app_reg), class: "btn btn-xs btn-warning" %>
                  <td><%= link_to 'Destroy', analytic_instance_analytic_instance_results_app_path(@analytic_instance,results_app_reg), method: :delete, class: "btn btn-xs btn-danger", data: { confirm: 'Are you sure?' } %></td>
                </tr>
                <% i = i + 1 %>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <%end%>
  </div>
</div>

<div class="container">
  <p>
  <h2>Configuration files</h2>
  </p>

  <div class="media">
    <%if @analytic_configs.empty?%>
      <div class="alert alert-warning">
        Currently no configuration files are upload with the analytic instance.
      </div>
    <%else%>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>Analytic instance configuration files</h4>
        </div>
        <div class="media">
          <table class="table table-hover">
            <thead>
            <tr>
              <th>#</th>
              <th>File name</th>
              <th colspan="2"></th>
            </tr>
            </thead>

            <tbody>
            <% i = 1 %>
            <% @analytic_configs.each do |analytic_instance_config| %>
              <tr>
                <td><%= i %></td>
                <td><%= analytic_instance_config.fileName %></td>
                <td><%= link_to 'Show', analytic_instance_analytic_instance_config_path(@analytic_instance.id, analytic_instance_config.id), class: "btn btn-xs btn-default"%></td>
                <td><%= link_to 'Edit', edit_analytic_instance_analytic_instance_config_path(@analytic_instance.id, analytic_instance_config.id), class: "btn btn-xs btn-warning" %>
                <td><%#= link_to 'Destroy', analytic_instance_analytic_instance_stream_path(@analytic_instance,input_stream), method: :delete, class: "btn btn-xs btn-danger", data: { confirm: 'Are you sure?' } %></td>
              </tr>
              <% i = i + 1 %>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <%end%>
  </div>
</div>

